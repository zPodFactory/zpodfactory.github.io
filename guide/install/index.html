
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../blog/">
      
      
        <link rel="next" href="../admin/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Installation and Configuration - zPodFactory</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Fira Code"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation-and-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="zPodFactory" class="md-header__button md-logo" aria-label="zPodFactory" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            zPodFactory
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation and Configuration
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/zpodfactory" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
    
  
  Introduction

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
    
  
  Installation & Configuration Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../admin/" class="md-tabs__link">
          
  
  
    
  
  Admin Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../user/" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/" class="md-tabs__link">
          
  
  
    
  
  API/SDK

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../roadmap/roadmap/" class="md-tabs__link">
        
  
  
    
  
  Roadmap

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../faq/faq/" class="md-tabs__link">
        
  
  
    
  
  FAQ

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="zPodFactory" class="md-nav__button md-logo" aria-label="zPodFactory" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    zPodFactory
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zpodfactory" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../blog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  
  <span class="md-ellipsis">
    Installation & Configuration Guide
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Installation & Configuration Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../admin/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Admin Guide
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Admin Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../user/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    API/SDK
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            API/SDK
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roadmap
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-level-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      High Level Diagram
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-zpodfactory-appliance-highly-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Using the zPodFactory Appliance (HIGHLY recommended)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manual-installation-not-recommended-devs-only-deprecated" class="md-nav__link">
    <span class="md-ellipsis">
      Manual Installation (not recommended, devs only, DEPRECATED)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Manual Installation (not recommended, devs only, DEPRECATED)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Network setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Storage setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      DNS configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Docker installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zpodcore-installation" class="md-nav__link">
    <span class="md-ellipsis">
      zPodCore installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="installation-and-configuration">Installation and Configuration</h1>
<p>Before you can start using zPodFactory, you need to install it. This section will guide you through the installation and configuration process.</p>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.836 3.244c.963-1.665 3.365-1.665 4.328 0l8.967 15.504c.963 1.667-.24 3.752-2.165 3.752H3.034c-1.926 0-3.128-2.085-2.165-3.752ZM12 8.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-4.5A.75.75 0 0 0 12 8.5m1 9a1 1 0 1 0-2 0 1 1 0 0 0 2 0"/></svg></span> Requirements are a very important part of the installation process, so please make sure to read them carefully.</p>
<h2 id="requirements">Requirements</h2>
<p>As you can imagine, if your plan is to deploy various nested environments you will need quite a bit of resources.</p>
<p>Here are some guidelines for the minimum requirements around the physical environment that will be used to host your nested environments.</p>
<h3 id="high-level-diagram">High Level Diagram</h3>
<p><a class="glightbox" href="../../img/zPodFactory-overview-layers.svg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="img" src="../../img/zPodFactory-overview-layers.svg" /></a></p>
<p>VMware SDDC:</p>
<ul>
<li>
<p>vCenter Server 7.0u3+ or later</p>
<ul>
<li>At least <code>4 vCPU / 16GB RAM / 250GB Storage</code> (SSD/NVMe recommended) for the zPodFactory appliance/management VM</li>
</ul>
<p>The zPodFactory Appliance will likely have a base 50GB disk, but usage will be much lower depending which products you download/use on your nested environments (you will be able to easily extend the disk using LVM if needed, highly recommended to extend the disk to 500GB+ if you plan to use a lot of products)</p>
</li>
<li>
<p>NSX-T 3.1+ (for <code>nsxt</code> basic deployment) or NSX 4.1.1+ (for <code>nsxt-projects</code> features)</p>
<ul>
<li>T0 &amp; T1 Gateways pre-deployed and configured for proper N/S connectivity (a T1 could be used to host the zPodFactory appliance/management VM)</li>
<li>Layer 3 connectivity between the zPodFactory appliance/management VM and the target vCenter Server(ESXi hosts too for OVF/OVA tasks)/NSX Manager, and nested environments (zPodFactory will deploy a T1 linked to a specified T0 for all the nested environments)</li>
<li>a network supernet for deploying nested environments (<code>10.10.0.0/20</code> for example, as each nested environment will get a global <code>/24</code> subnet from this supernet, carved into 4 x <code>/26</code> subnets to be used with native vlan and guest vlan tagging within the nested environment)</li>
<li>check <a href="../../faq/faq/#why-does-preparing-nsx-hosts-break-my-zpod">this FAQ section</a> for changing the NSX default DLR-MAC address</li>
</ul>
</li>
<li>
<p>Decent Storage performance (SSD/NVMe) for the nested environments if possible (vSAN OSA/ESA is recommended) - 4TB+ of storage is recommended (depending on the number of nested environments you plan to deploy)</p>
<ul>
<li>the zPodFactory Appliance or management vm (if installed manually) should take between 50-500GB of storage (depending how many components will be downloaded/used, and could grow over time)</li>
<li>check <a href="../../faq/faq/#why-does-creating-a-vsan-datastore-fails-in-my-zpod">this FAQ section</a> if you are using vSAN on the physical environment.</li>
</ul>
</li>
</ul>
<blockquote>
<p>Please apply common sense here, as this is a <code>it depends...</code> type of answer :-)</p>
</blockquote>
<p>Also from a networking perspective, in addition to the minimum requirements above, you will need to have a few things in place:</p>
<ul>
<li>if you plan to connect zPodFactory to multiple <code>endpoints</code> (an endpoint is a concept that depicts where you deploy a nested environment(zPod), and consists of a vcsa/nsx pair, and mainly a network supernet for zPods)</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Please refer to the below <a href="./#network-setup">Network Section</a> that explains <code>endpoints</code> connectivity/requirements:</p>
</div>
<h2 id="using-the-zpodfactory-appliance-highly-recommended">Using the zPodFactory Appliance (HIGHLY recommended)</h2>
<p>The zPodFactory appliance is a pre-built virtual machine that contains all the required components to run zPodFactory.</p>
<p>It is the recommended way to deploy zPodFactory, as it will simplify the installation process and will ensure that all the required components are installed and pre-configured properly.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that the OVF Properties are set correctly, and the networking settings will provide internet access to the zPodFactory Appliance. (The appliance will stop the installation process if it doesn't have internet access)</p>
</div>
<ul>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"/></svg></span> 11/03/2025 - zPodFactory Appliance latest:<ul>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg></span> <a href="https://cloud.tsugliani.fr/ova/zpodfactory-latest.ova">Download OVA</a> [792MB]</li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></span> <a href="https://github.com/zPodFactory/zpodcore/commits/main/">Git Commit Log</a></li>
</ul>
</li>
</ul>
<p>[TBD: Add a link to the blog post describing the installation &amp; setup process with the appliance]</p>
<h2 id="manual-installation-not-recommended-devs-only-deprecated">Manual Installation (not recommended, devs only, DEPRECATED)</h2>
<p>If you prefer to install zPodFactory manually and potentially set yourself a dev environment for it, you can follow the below instructions.</p>
<p>We recommend starting with a <a href="https://cloud.tsugliani.fr/ova/zbox-12.9.ova">zBox 12.9</a> appliance, as it is also the Linux distribution used for all our development and testing, and for the zPodFactory Appliance.  This should ensure all the steps we provide are as accurate and informative as possible.</p>
<p>Deploy the zBox appliance and power it on with the correct network and OVF properties configuration.</p>
<h3 id="network-setup">Network setup</h3>
<p>You can setup any additional specific networking configuration you need for your environment, but here is a quick example of what we use in our lab:</p>
<p><a class="glightbox" href="../../img/zPodFactory-topology-overview-network-endpoints.svg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="img" src="../../img/zPodFactory-topology-overview-network-endpoints.svg" /></a></p>
<ul>
<li><code>eth0</code>: interface connected to a public IP (Internet)</li>
<li><code>eth1</code>: interface connected to the whole lab private network (L3/BGP fabric)</li>
</ul>
<blockquote>
<p>PS: Remember that for zPodFactory to work correctly you need L3 connectivity to <code>vCenter Server and ESXi Hosts</code> (OVA/OVF uploads), and <code>NSX Manager API Access</code>.
Those will be necessary for automating the deployment of the nested Layer 1 part of the labs.
Also required will be <code>connectivity access to the networks that we provision in NSX-T</code> for the nested environments (zPods), so that we can deploy the nested Layer 2 part of the labs. (ovf deploys, connections etc to the nested ESXi hosts that will be the foundation for any nested environment)</p>
</blockquote>
<h3 id="storage-setup">Storage setup</h3>
<p>Let's update the appliance and install the latest updates:</p>
<div class="highlight" data-copy="apt update && apt dist-upgrade"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>❯<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt<span class="w"> </span>dist-upgrade
</code></pre></div>
<p>Install <code>cloud-guest-utils</code> package:</p>
<div class="highlight" data-copy="apt install cloud-guest-utils"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>❯ apt install cloud-guest-utils
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>Reading package lists... Done
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>Building dependency tree... Done
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>Reading state information... Done
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>The following additional packages will be installed:
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>  gdisk
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>Suggested packages:
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>  cloud-init
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>The following NEW packages will be installed:
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>  cloud-guest-utils gdisk
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>Need to get 249 kB of archives.
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>After this operation, 979 kB of additional disk space will be used.
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>Do you want to continue? [Y/n]
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>Get:1 http://deb.debian.org/debian bookworm/main amd64 cloud-guest-utils all 0.33-1 [27.9 kB]
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>Get:2 http://deb.debian.org/debian bookworm/main amd64 gdisk amd64 1.0.9-2.1 [221 kB]
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>Fetched 249 kB in 0s (715 kB/s)
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>Selecting previously unselected package cloud-guest-utils.
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>(Reading database ... 42664 files and directories currently installed.)
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>Preparing to unpack .../cloud-guest-utils_0.33-1_all.deb ...
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>Unpacking cloud-guest-utils (0.33-1) ...
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>Selecting previously unselected package gdisk.
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>Preparing to unpack .../gdisk_1.0.9-2.1_amd64.deb ...
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>Unpacking gdisk (1.0.9-2.1) ...
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>Setting up gdisk (1.0.9-2.1) ...
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>Setting up cloud-guest-utils (0.33-1) ...
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>Processing triggers for man-db (2.11.2-2) ...
</code></pre></div>
<p>Check current partition scheme (we grew the VM disk to 750GB on vCenter):</p>
<div class="highlight" data-copy="fdisk -l"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>❯ fdisk -l
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>Disk /dev/sda: 750 GiB, 805306368000 bytes, 1572864000 sectors
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>Disk model: Virtual disk
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>Units: sectors of 1 * 512 = 512 bytes
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>Sector size (logical/physical): 512 bytes / 512 bytes
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>I/O size (minimum/optimal): 512 bytes / 512 bytes
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>Disklabel type: dos
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>Disk identifier: 0xb2fbd5f2
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>Device     Boot   Start       End   Sectors  Size Id Type
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>/dev/sda1  *       2048    999423    997376  487M 83 Linux
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="hll">/dev/sda2       1001470 104855551 103854082 49.5G  5 Extended
</span><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="hll">/dev/sda5       1001472 104855551 103854080 49.5G 8e Linux LVM
</span><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>Disk /dev/mapper/vg-swap: 7.63 GiB, 8191475712 bytes, 15998976 sectors
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>Units: sectors of 1 * 512 = 512 bytes
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>Sector size (logical/physical): 512 bytes / 512 bytes
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>I/O size (minimum/optimal): 512 bytes / 512 bytes
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="hll">Disk /dev/mapper/vg-root: 41.89 GiB, 44979716096 bytes, 87851008 sectors
</span><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>Units: sectors of 1 * 512 = 512 bytes
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>Sector size (logical/physical): 512 bytes / 512 bytes
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>I/O size (minimum/optimal): 512 bytes / 512 bytes
</code></pre></div>
<p>Grow the extended partition to the new maximum available geometry:</p>
<div class="highlight" data-copy="growpart /dev/sda 2"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>❯ growpart /dev/sda 2
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>CHANGED: partition=2 start=1001470 old: size=103854082 end=104855551 new: size=1571862497 end=1572863966
</code></pre></div>
<p>Check the changes:</p>
<div class="highlight" data-copy="fdisk -l"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>❯ fdisk -l
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>Disk /dev/sda: 750 GiB, 805306368000 bytes, 1572864000 sectors
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>Disk model: Virtual disk
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>Units: sectors of 1 * 512 = 512 bytes
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>Sector size (logical/physical): 512 bytes / 512 bytes
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>I/O size (minimum/optimal): 512 bytes / 512 bytes
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>Disklabel type: dos
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>Disk identifier: 0xb2fbd5f2
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>Device     Boot   Start        End    Sectors   Size Id Type
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>/dev/sda1  *       2048     999423     997376   487M 83 Linux
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="hll">/dev/sda2       1001470 1572863966 1571862497 749.5G  5 Extended
</span><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>/dev/sda5       1001472  104855551  103854080  49.5G 8e Linux LVM
</code></pre></div>
<p>Grow the logical partition used for LVM2:</p>
<div class="highlight" data-copy="growpart /dev/sda 5"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>❯ growpart /dev/sda 5
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>CHANGED: partition=5 start=1001472 old: size=103854080 end=104855551 new: size=1571862495 end=1572863966
</code></pre></div>
<p>Check the changes:</p>
<div class="highlight" data-copy="fdisk -l"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>❯ fdisk -l
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>Disk /dev/sda: 750 GiB, 805306368000 bytes, 1572864000 sectors
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>Disk model: Virtual disk
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>Units: sectors of 1 * 512 = 512 bytes
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>Sector size (logical/physical): 512 bytes / 512 bytes
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>I/O size (minimum/optimal): 512 bytes / 512 bytes
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>Disklabel type: dos
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>Disk identifier: 0xb2fbd5f2
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>Device     Boot   Start        End    Sectors   Size Id Type
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>/dev/sda1  *       2048     999423     997376   487M 83 Linux
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>/dev/sda2       1001470 1572863966 1571862497 749.5G  5 Extended
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="hll">/dev/sda5       1001472 1572863966 1571862495 749.5G 8e Linux LVM
</span></code></pre></div>
<p>Verify physical volume details:</p>
<div class="highlight" data-copy="pvdisplay"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>❯ pvdisplay
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>  --- Physical volume ---
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>  PV Name               /dev/sda5
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>  VG Name               vg
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="hll">  PV Size               749.52 GiB / not usable 1.98 MiB
</span><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>  Allocatable           yes
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>  PE Size               4.00 MiB
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>  Total PE              191877
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>  Free PE               179200
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>  Allocated PE          12677
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>  PV UUID               B0U0tY-X3d5-koil-ORim-6F1t-8284-FgWArx
</code></pre></div>
<p>Resize the physical volume to the maximum available geometry (if growpart didn't take care of this):</p>
<div class="highlight" data-copy="pvresize /dev/sda5"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>❯ pvresize /dev/sda5
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>  Physical volume &quot;/dev/sda5&quot; changed
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>  1 physical volume(s) resized or updated / 0 physical volume(s) not resized
</code></pre></div>
<p>Display the <code>/dev/vg/root</code> details:</p>
<div class="highlight" data-copy="lvdisplay /dev/vg/root"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>❯ lvdisplay /dev/vg/root
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>  --- Logical volume ---
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>  LV Path                /dev/vg/root
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>  LV Name                root
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>  VG Name                vg
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>  LV UUID                15WYF1-uuTo-Go9v-kVGX-Yokc-CkXY-EMhgYf
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>  LV Write Access        read/write
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>  LV Creation host, time zbox, 2023-09-19 13:43:34 +0000
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>  LV Status              available
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>  # open                 1
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="hll">  LV Size                41.89 GiB
</span><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>  Current LE             10724
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>  Segments               1
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>  Allocation             inherit
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>  Read ahead sectors     auto
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>  - currently set to     256
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>  Block device           254:1
</code></pre></div>
<p>Now let's extend this to the available space on the PV:</p>
<div class="highlight" data-copy="lvextend -l +100%FREE /dev/vg/root"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>❯<span class="w"> </span>lvextend<span class="w"> </span>-l<span class="w"> </span>+100%FREE<span class="w"> </span>/dev/vg/root
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span>Size<span class="w"> </span>of<span class="w"> </span>logical<span class="w"> </span>volume<span class="w"> </span>vg/root<span class="w"> </span>changed<span class="w"> </span>from<span class="w"> </span><span class="m">41</span>.89<span class="w"> </span>GiB<span class="w"> </span><span class="o">(</span><span class="m">10724</span><span class="w"> </span>extents<span class="o">)</span><span class="w"> </span>to<span class="w"> </span><span class="m">741</span>.89<span class="w"> </span>GiB<span class="w"> </span><span class="o">(</span><span class="m">189924</span><span class="w"> </span>extents<span class="o">)</span>.
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span>Logical<span class="w"> </span>volume<span class="w"> </span>vg/root<span class="w"> </span>successfully<span class="w"> </span>resized.
</code></pre></div>
<p>Verify the current filesystem free space information:</p>
<div class="highlight" data-copy="duf -only local"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>❯<span class="w"> </span>duf<span class="w"> </span>-only<span class="w"> </span><span class="nb">local</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>╭────────────────────────────────────────────────────────────────────────────────────────────╮
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>│<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>devices<span class="w">                                                                            </span>│
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>├────────────┬────────┬───────┬────────┬───────────────────────────────┬──────┬──────────────┤
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>│<span class="w"> </span>MOUNTED<span class="w"> </span>ON<span class="w"> </span>│<span class="w">   </span>SIZE<span class="w"> </span>│<span class="w">  </span>USED<span class="w"> </span>│<span class="w">  </span>AVAIL<span class="w"> </span>│<span class="w">              </span>USE%<span class="w">             </span>│<span class="w"> </span>TYPE<span class="w"> </span>│<span class="w"> </span>FILESYSTEM<span class="w">   </span>│
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>├────────────┼────────┼───────┼────────┼───────────────────────────────┼──────┼──────────────┤
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="hll">│<span class="w"> </span>/<span class="w">          </span>│<span class="w">  </span><span class="m">40</span>.9G<span class="w"> </span>│<span class="w">  </span><span class="m">1</span>.5G<span class="w"> </span>│<span class="w">  </span><span class="m">37</span>.3G<span class="w"> </span>│<span class="w"> </span><span class="o">[</span>....................<span class="o">]</span><span class="w">   </span><span class="m">3</span>.7%<span class="w"> </span>│<span class="w"> </span>ext4<span class="w"> </span>│<span class="w"> </span>/dev/vg/root<span class="w"> </span>│
</span><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>│<span class="w"> </span>/boot<span class="w">      </span>│<span class="w"> </span><span class="m">446</span>.2M<span class="w"> </span>│<span class="w"> </span><span class="m">57</span>.7M<span class="w"> </span>│<span class="w"> </span><span class="m">360</span>.2M<span class="w"> </span>│<span class="w"> </span><span class="o">[</span><span class="c1">##..................]  12.9% │ ext4 │ /dev/sda1    │</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>╰────────────┴────────┴───────┴────────┴───────────────────────────────┴──────┴──────────────╯
</code></pre></div>
<p>We now need to do a filesystem resize to take into account the new geometry and verify the filesystem afterwards:</p>
<div class="highlight" data-copy="resize2fs /dev/vg/root"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>❯<span class="w"> </span>resize2fs<span class="w"> </span>/dev/vg/root
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>resize2fs<span class="w"> </span><span class="m">1</span>.47.0<span class="w"> </span><span class="o">(</span><span class="m">5</span>-Feb-2023<span class="o">)</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>Filesystem<span class="w"> </span>at<span class="w"> </span>/dev/vg/root<span class="w"> </span>is<span class="w"> </span>mounted<span class="w"> </span>on<span class="w"> </span>/<span class="p">;</span><span class="w"> </span>on-line<span class="w"> </span>resizing<span class="w"> </span>required
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="nv">old_desc_blocks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">6</span>,<span class="w"> </span><span class="nv">new_desc_blocks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">93</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>The<span class="w"> </span>filesystem<span class="w"> </span>on<span class="w"> </span>/dev/vg/root<span class="w"> </span>is<span class="w"> </span>now<span class="w"> </span><span class="m">194482176</span><span class="w"> </span><span class="o">(</span>4k<span class="o">)</span><span class="w"> </span>blocks<span class="w"> </span>long.
</code></pre></div>
<div class="highlight" data-copy="duf -only local"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>❯<span class="w"> </span>duf<span class="w"> </span>-only<span class="w"> </span><span class="nb">local</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>╭────────────────────────────────────────────────────────────────────────────────────────────╮
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>│<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>devices<span class="w">                                                                            </span>│
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>├────────────┬────────┬───────┬────────┬───────────────────────────────┬──────┬──────────────┤
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>│<span class="w"> </span>MOUNTED<span class="w"> </span>ON<span class="w"> </span>│<span class="w">   </span>SIZE<span class="w"> </span>│<span class="w">  </span>USED<span class="w"> </span>│<span class="w">  </span>AVAIL<span class="w"> </span>│<span class="w">              </span>USE%<span class="w">             </span>│<span class="w"> </span>TYPE<span class="w"> </span>│<span class="w"> </span>FILESYSTEM<span class="w">   </span>│
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>├────────────┼────────┼───────┼────────┼───────────────────────────────┼──────┼──────────────┤
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="hll">│<span class="w"> </span>/<span class="w">          </span>│<span class="w"> </span><span class="m">730</span>.0G<span class="w"> </span>│<span class="w">  </span><span class="m">1</span>.5G<span class="w"> </span>│<span class="w"> </span><span class="m">698</span>.3G<span class="w"> </span>│<span class="w"> </span><span class="o">[</span>....................<span class="o">]</span><span class="w">   </span><span class="m">0</span>.2%<span class="w"> </span>│<span class="w"> </span>ext4<span class="w"> </span>│<span class="w"> </span>/dev/vg/root<span class="w"> </span>│
</span><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>│<span class="w"> </span>/boot<span class="w">      </span>│<span class="w"> </span><span class="m">446</span>.2M<span class="w"> </span>│<span class="w"> </span><span class="m">57</span>.7M<span class="w"> </span>│<span class="w"> </span><span class="m">360</span>.2M<span class="w"> </span>│<span class="w"> </span><span class="o">[</span><span class="c1">##..................]  12.9% │ ext4 │ /dev/sda1    │</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>╰────────────┴────────┴───────┴────────┴───────────────────────────────┴──────┴──────────────╯
</code></pre></div>
<p>We now have a 730GB root filesystem, which will be more than enough for a while if you are using MANY VMware products in your nested labs.</p>
<h3 id="dns-configuration">DNS configuration</h3>
<p>zPodFactory does manage the DNS configuration for the nested environments, so you will need to configure a DNS server that will be used by the nested environments.</p>
<p>For this we are using <code>dnsmasq</code>, a simple linux daemon that serves as our DNS facility.</p>
<p>It will rely on a watchdog, that will check any modification to the configuration file, and will send a <code>SIGHUP</code> signal to the <code>dnsmasq</code> process to reload the configuration.</p>
<p>Let's set up the base <code>dnsmasq</code> configuration file <code>/etc/dnsmasq.conf</code>:</p>
<div class="highlight"><span class="filename">/etc/dnsmasq.conf</span><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="na">listen-address</span><span class="o">=</span><span class="s">127.0.0.1,X.X.X.X</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="na">interface</span><span class="o">=</span><span class="s">lo,eth0</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="na">bind-interfaces</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="na">expand-hosts</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="na">dns-forward-max</span><span class="o">=</span><span class="s">1500</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="na">cache-size</span><span class="o">=</span><span class="s">10000</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="na">no-dhcp-interface</span><span class="o">=</span><span class="s">lo,eth0</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="na">server</span><span class="o">=</span><span class="s">1.1.1.1</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="na">domain</span><span class="o">=</span><span class="s">zpod.lab</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="na">local</span><span class="o">=</span><span class="s">/zpod.lab/</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="na">servers-file</span><span class="o">=</span><span class="s">/zPod/zPodDnsmasqServers/servers.conf</span>
</code></pre></div>
<p>This is obviously tied to my specific configuration so i'll highlight the important parts:</p>
<ul>
<li><code>listen-address</code>: the IP address(es) that dnsmasq will listen on</li>
<li><code>interface</code>: the interface(s) that dnsmasq will listen on</li>
<li><code>no-dhcp-interface</code>: the interface(s) that dnsmasq will not listen on for DHCP requests (We don't need a DHCP Server on this VM)</li>
<li><code>server</code>: the DNS server(s) that dnsmasq will use to resolve DNS requests upstream</li>
<li><code>domain</code> and <code>local</code>: the domain name that dnsmasq will use to resolve DNS requests locally for the deployed nested envs:</li>
</ul>
<p>As an example if you put <code>zpod.lab</code> here, every zPod deployed, will have a DNS name like this:</p>
<ul>
<li><code>zpodname.zpod.lab</code></li>
</ul>
<p>and all the DNS requests for this domain will be resolved by another dnsmasq instance on the nested environment itself also through dnsmasq.</p>
<ul>
<li><code>server=/specificdomain/dnsip</code>: this is used to forward specific DNS requests to a specific DNS server, in this case we are forwarding all the requests for the <code>zpod.io</code> domain to the DNS server</li>
<li><code>servers-file</code>: this is the file that will be used to store the DNS records for the deployed nested environments</li>
</ul>
<blockquote>
<p>Every time a nested environment is deployed or destroyed, the <code>servers-file</code> configuration file will be updated with the new information, and the watchdog will send a SIGHUP signal to dnsmasq to reload the configuration.</p>
</blockquote>
<p>Restart the dnsmasq service.</p>
<div class="highlight" data-copy="systemctl restart dnsmasq"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>❯ systemctl restart dnsmasq
</code></pre></div>
<p>Create the following systemd service file <code>/etc/systemd/system/zdnsmasqservers.service</code>:</p>
<div class="highlight"><span class="filename">/etc/systemd/system/zdnsmasqservers.service</span><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">[Unit]</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="na">Description</span><span class="o">=</span><span class="s">zPodFactory dnsmasq watchdog</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="na">After</span><span class="o">=</span><span class="s">network.target</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="k">[Service]</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="na">User</span><span class="o">=</span><span class="s">root</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="na">Type</span><span class="o">=</span><span class="s">simple</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/bin/python3 -u /usr/local/bin/zdnsmasqservers-watchdog.py</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="na">Restart</span><span class="o">=</span><span class="s">always</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="na">SyslogIdentifier</span><span class="o">=</span><span class="s">zdnsmasqservers</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="k">[Install]</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target</span>
</code></pre></div>
<p>Create the following python script <code>/usr/local/bin/zdnsmasqservers-watchdog.py</code> associated to the systemd service file above:</p>
<div class="highlight"><span class="filename">/usr/local/bin/zdnsmasqservers-watchdog.py</span><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="ch">#!/usr/bin/env python3</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">watchdog.events</span><span class="w"> </span><span class="kn">import</span> <span class="n">PatternMatchingEventHandler</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">watchdog.observers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Observer</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">Handler</span><span class="p">(</span><span class="n">PatternMatchingEventHandler</span><span class="p">):</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_any_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">is_directory</span><span class="p">:</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">event_type</span> <span class="o">==</span> <span class="s2">&quot;modified&quot;</span><span class="p">:</span>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>            <span class="nb">print</span><span class="p">(</span>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">src_path</span><span class="si">}</span><span class="s2"> file was </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">event_type</span><span class="si">}</span><span class="s2"> - &quot;</span>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>                <span class="s2">&quot;Send SIGHUP to dnsmasq...&quot;</span>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>            <span class="p">)</span>
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>            <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="s2">&quot;pkill&quot;</span><span class="p">,</span> <span class="s2">&quot;-SIGHUP&quot;</span><span class="p">,</span> <span class="s2">&quot;dnsmasq&quot;</span><span class="p">])</span>
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>
<a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a>    <span class="n">event_handler</span> <span class="o">=</span> <span class="n">Handler</span><span class="p">(</span><span class="n">patterns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;servers.conf&quot;</span><span class="p">])</span>
<a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a>    <span class="n">observer</span> <span class="o">=</span> <span class="n">Observer</span><span class="p">()</span>
<a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a>    <span class="n">observer</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span>
<a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a>        <span class="n">event_handler</span><span class="p">,</span>
<a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>        <span class="s2">&quot;/zPod/zPodDnsmasqServers&quot;</span><span class="p">,</span> <span class="c1"># this is the directory where the servers.conf file will be stored</span>
<a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>        <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a>    <span class="p">)</span>
<a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>    <span class="n">observer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>        <span class="n">observer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a>    <span class="n">observer</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>
<p>Install python3-watchdog package used in the script.</p>
<div class="highlight" data-copy="apt install python3-pip python3-watchdog"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>❯ apt install python3-pip python3-watchdog
</code></pre></div>
<p>Change permissions to provide execution permission on the script:</p>
<div class="highlight" data-copy="chmod +x /usr/local/bin/zdnsmasqservers-watchdog.py"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>❯ chmod +x /usr/local/bin/zdnsmasqservers-watchdog.py
</code></pre></div>
<p>Create the <code>/zPod/zPodDnsmasqServers</code> directory:</p>
<div class="highlight" data-copy="mkdir -p /zPod/zPodDnsmasqServers"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>❯ mkdir -p /zPod/zPodDnsmasqServers
</code></pre></div>
<p>Reload systemctl daemon:</p>
<div class="highlight" data-copy="systemctl daemon-reload"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>❯ systemctl daemon-reload
</code></pre></div>
<p>Enable the service:</p>
<div class="highlight" data-copy="systemctl enable zdnsmasqservers.service"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>❯ systemctl enable zdnsmasqservers.service
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>Created symlink /etc/systemd/system/multi-user.target.wants/zdnsmasqservers.service → /etc/systemd/system/zdnsmasqservers.service.
</code></pre></div>
<p>Start the service:</p>
<div class="highlight" data-copy="systemctl start zdnsmasqservers.service"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>❯ systemctl start zdnsmasqservers.service
</code></pre></div>
<p>Verify the service is running:</p>
<div class="highlight" data-copy="systemctl status zdnsmasqservers.service"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>❯ systemctl status zdnsmasqservers.service
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>● zdnsmasqservers.service - zPodFactory dnsmasq watchdog
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>     Loaded: loaded (/etc/systemd/system/zdnsmasqservers.service; enabled; preset: enabled)
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>     Active: active (running) since Thu 2023-10-05 14:42:19 UTC; 8min ago
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>   Main PID: 13681 (python3)
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>      Tasks: 4 (limit: 19135)
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>     Memory: 8.1M
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>        CPU: 66ms
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>     CGroup: /system.slice/zdnsmasqservers.service
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>             └─13681 /usr/bin/python3 -u /usr/local/bin/zdnsmasqservers-watchdog.py
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>Oct 05 14:42:19 zpodfactory systemd[1]: Started zdnsmasqservers.service - zPodFactory dnsmasq watchdog.
</code></pre></div>
<p>Check the logs (this is an example where I edited the file manually to check the watchdog could detect changes and was sending the <code>SIGHUP</code> signal to <code>dnsmasq</code>):</p>
<p>You'll have this behavior happen everytime you deploy or destroy a new nested environment.</p>
<div class="highlight" data-copy="journalctl -u zdnsmasqservers.service"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>❯ journalctl -u zdnsmasqservers.service
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>Oct 05 14:42:19 zpodfactory systemd[1]: Started zdnsmasqservers.service - zPodFactory dnsmasq watchdog.
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>Oct 05 14:42:31 zpodfactory zdnsmasqservers[13681]: /zPod/zPodDnsmasqServers/servers.conf file was modified - Send SIGHUP to dnsmasq...
</code></pre></div>
<h3 id="docker-installation">Docker installation</h3>
<p>The whole project relies on a <a href="https://docs.docker.com/compose">docker compose</a> application stack.</p>
<div class="highlight" data-copy="apt install docker-ce docker-compose-plugin"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>❯ apt install docker-ce docker-compose-plugin
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>Reading package lists... Done
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>Building dependency tree... Done
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>Reading state information... Done
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>The following additional packages will be installed:
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>  containerd.io docker-buildx-plugin docker-ce-cli iptables libip6tc2 libltdl7 libslirp0 pigz slirp4netns
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>Suggested packages:
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>  aufs-tools cgroupfs-mount | cgroup-lite firewalld
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>The following NEW packages will be installed:
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>  containerd.io docker-buildx-plugin docker-ce docker-ce-cli docker-compose-plugin iptables libip6tc2 libltdl7 libslirp0 pigz
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>  slirp4netns
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>0 upgraded, 11 newly installed, 0 to remove and 0 not upgraded.
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>Need to get 108 MB of archives.
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>After this operation, 403 MB of additional disk space will be used.
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>Do you want to continue? [Y/n]
</code></pre></div>
<h3 id="zpodcore-installation">zPodCore installation</h3>
<p>Create a directory to setup the application stack.</p>
<div class="highlight" data-copy="mkdir -vp $HOME/git && cd $HOME/git"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>❯ mkdir -vp $HOME/git &amp;&amp; cd $HOME/git
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>mkdir: created directory &#39;/root/git&#39;
</code></pre></div>
<p>Clone the zPodCore repository in the <code>$HOME/git</code> directory:</p>
<div class="highlight" data-copy="git clone https://github.com/zPodFactory/zpodcore.git"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>❯ git clone https://github.com/zPodFactory/zpodcore.git
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>Cloning into &#39;zpodcore&#39;...
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>remote: Enumerating objects: 4344, done.
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>remote: Counting objects: 100% (1543/1543), done.
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>remote: Compressing objects: 100% (606/606), done.
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>remote: Total 4344 (delta 941), reused 1317 (delta 819), pack-reused 2801
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>Receiving objects: 100% (4344/4344), 1.22 MiB | 9.36 MiB/s, done.
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>Resolving deltas: 100% (2677/2677), done.
</code></pre></div>
<p>Install <code>pyenv</code></p>
<div class="highlight" data-copy="git clone https://github.com/pyenv/pyenv.git ~/.pyenv"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>❯ git clone https://github.com/pyenv/pyenv.git ~/.pyenv
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>Cloning into &#39;/root/.pyenv&#39;...
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>remote: Enumerating objects: 23497, done.
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>remote: Counting objects: 100% (2072/2072), done.
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>remote: Compressing objects: 100% (217/217), done.
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>remote: Total 23497 (delta 1907), reused 1931 (delta 1839), pack-reused 21425
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>Receiving objects: 100% (23497/23497), 4.69 MiB | 20.86 MiB/s, done.
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>Resolving deltas: 100% (15988/15988), done.
</code></pre></div>
<p>Setup <code>pyenv</code> for the currently installed <code>zsh</code> shell</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.zshrc
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;command -v pyenv &gt;/dev/null || export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.zshrc
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;eval &quot;$(pyenv init -)&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.zshrc
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="nb">source</span><span class="w"> </span>~/.zshrc
</code></pre></div>
<p>Python library requirements for compilation</p>
<div class="highlight" data-copy="apt install build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev llvm libncurses5-dev libncursesw5-dev libffi-dev liblzma-dev python3-openssl git libpq-dev"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>❯ apt install build-essential libssl-dev zlib1g-dev libbz2-dev \
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>libreadline-dev libsqlite3-dev llvm libncurses5-dev libncursesw5-dev \
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>libffi-dev liblzma-dev python3-openssl git libpq-dev
</code></pre></div>
<p>install python 3.12.1</p>
<div class="highlight" data-copy="pyenv install 3.12.1"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>❯ pyenv install 3.12.1
</code></pre></div>
<p>For each of the following directories set python version to 3.12.1, poetry config &amp; poetry install.</p>
<ul>
<li><code>$HOME/git/zpodcore/zpodapi</code></li>
<li><code>$HOME/git/zpodcore/zpodengine</code></li>
<li><code>$HOME/git/zpodcore/zpodcli</code></li>
</ul>
<div class="highlight" data-copy="for i in zpodapi zpodengine zpodcli; do cd $HOME/git/zpodcore/$i && pyenv local 3.12.1 && pyenv exec pip install poetry && poetry config virtualenvs.in-project true && poetry install; done; cd $HOME/git/zpodcore"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>for i in zpodapi zpodengine zpodcli;
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>  do cd $HOME/git/zpodcore/$i &amp;&amp; pyenv local 3.12.1 &amp;&amp; pyenv exec pip install poetry &amp;&amp; poetry config virtualenvs.in-project true &amp;&amp; poetry install;
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>done;
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>cd $HOME/git/zpodcore
</code></pre></div>
<p>Create a <code>.env</code> file in the <code>$HOME/git/zpodcore</code> directory and set the required environment variables.</p>
<div class="highlight" data-copy="cp .env.default .env && vim .env"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>❯ cp .env.default .env
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>❯ vim .env
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Change <code>X.X.X.X</code> at the bottom by the IP of this zPodFactory VM</p>
</div>
<p>Build the Docker container images for the zPodCore application stack.</p>
<div class="highlight" data-copy="docker compose build"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>❯ docker compose build
</code></pre></div>
<p>Setup an additional apt list for some additional packages</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>wget<span class="w"> </span>-qO<span class="w"> </span>-<span class="w"> </span><span class="s1">&#39;https://proget.makedeb.org/debian-feeds/prebuilt-mpr.pub&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>/usr/share/keyrings/prebuilt-mpr-archive-keyring.gpg<span class="w"> </span><span class="m">1</span>&gt;<span class="w"> </span>/dev/null
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb [arch=all,</span><span class="k">$(</span>dpkg<span class="w"> </span>--print-architecture<span class="k">)</span><span class="s2"> signed-by=/usr/share/keyrings/prebuilt-mpr-archive-keyring.gpg] https://proget.makedeb.org prebuilt-mpr </span><span class="k">$(</span>lsb_release<span class="w"> </span>-cs<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w">  </span>tee<span class="w"> </span>/etc/apt/sources.list.d/prebuilt-mpr.list
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>apt<span class="w"> </span>update
</code></pre></div>
<div class="highlight" data-copy="apt install just bc"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>❯ apt install just bc
</code></pre></div>
<p>Here is a facility script called <code>deploy.sh</code> that will help launch the docker compose full application stack with some pre-configured settings through the zPodAPI. (<code>curl</code> is used for this)</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This script is <strong>HIGHLY</strong> deprecated, we recommend using the zPodFactory Appliance instead.
Check the <a href="https://github.com/zPodFactory/packer-zpodfactory/blob/main/files/zpodfactory.sh">zPodFactory Appliance installation script</a> for more information if you really want to install this manually.</p>
<p>We will keep this script for reference purposes, but we will not update it anymore.</p>
</div>
<div class="highlight"><span class="filename">/root/git/zpodcore/deploy.sh</span><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="ch">#!/usr/bin/sh</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="nv">PS4</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>tput<span class="w"> </span>setaf<span class="w"> </span><span class="m">3</span><span class="k">)</span><span class="s2">&gt;&gt;&gt;</span><span class="k">$(</span>tput<span class="w"> </span>sgr0<span class="k">)</span><span class="s2"> &quot;</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="nv">ZPODAPI_URL</span><span class="o">=</span>X.X.X.X:8000
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="nv">PREFIX</span><span class="o">=</span>project
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="nb">set</span><span class="w"> </span>-x
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="c1"># Shut down docker</span>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a>docker<span class="w"> </span>compose<span class="w"> </span>down
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="c1"># Remove volumes</span>
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a>docker<span class="w"> </span>volume<span class="w"> </span>rm<span class="w"> </span><span class="si">${</span><span class="nv">PREFIX</span><span class="si">}</span>_zpod_vol_postgres<span class="w"> </span><span class="si">${</span><span class="nv">PREFIX</span><span class="si">}</span>_zpod_vol_prefect
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="c1"># Restart docker</span>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a>just<span class="w"> </span>zpodcore-start-background
<a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a>sleep<span class="w"> </span><span class="m">10</span>
<a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a>
<a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a><span class="c1"># Execute first flow to prep prefect</span>
<a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a><span class="c1"># This avoids the unique key error &quot;uq_configuration__key&quot; problem when scheduling a lot of deployments to run at the same time</span>
<a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a>just<span class="w"> </span>zpodengine-cmd<span class="w"> </span>python<span class="w"> </span>src/zpodengine/flow_init.py
<a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a>
<a id="__codelineno-38-24" name="__codelineno-38-24" href="#__codelineno-38-24"></a><span class="c1"># Deploy</span>
<a id="__codelineno-38-25" name="__codelineno-38-25" href="#__codelineno-38-25"></a>just<span class="w"> </span>zpodengine-deploy-all
<a id="__codelineno-38-26" name="__codelineno-38-26" href="#__codelineno-38-26"></a>
<a id="__codelineno-38-27" name="__codelineno-38-27" href="#__codelineno-38-27"></a><span class="c1"># Delete library entries</span>
<a id="__codelineno-38-28" name="__codelineno-38-28" href="#__codelineno-38-28"></a>just<span class="w"> </span>zpodapi-exec<span class="w"> </span><span class="s2">&quot;rm -rf /library/default&quot;</span>
<a id="__codelineno-38-29" name="__codelineno-38-29" href="#__codelineno-38-29"></a>
<a id="__codelineno-38-30" name="__codelineno-38-30" href="#__codelineno-38-30"></a><span class="c1"># Set zpodfactory_host</span>
<a id="__codelineno-38-31" name="__codelineno-38-31" href="#__codelineno-38-31"></a>curl<span class="w"> </span>-X<span class="w"> </span>PATCH<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/settings/name<span class="o">=</span>zpodfactory_host<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-32" name="__codelineno-38-32" href="#__codelineno-38-32"></a><span class="s1">  &quot;value&quot;: &quot;X.X.X.X&quot;</span>
<a id="__codelineno-38-33" name="__codelineno-38-33" href="#__codelineno-38-33"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-34" name="__codelineno-38-34" href="#__codelineno-38-34"></a>
<a id="__codelineno-38-35" name="__codelineno-38-35" href="#__codelineno-38-35"></a><span class="c1"># Set zpodfactory_default_domain</span>
<a id="__codelineno-38-36" name="__codelineno-38-36" href="#__codelineno-38-36"></a>curl<span class="w"> </span>-X<span class="w"> </span>PATCH<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/settings/name<span class="o">=</span>zpodfactory_default_domain<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-37" name="__codelineno-38-37" href="#__codelineno-38-37"></a><span class="s1">  &quot;value&quot;: &quot;zpod.lab&quot;</span>
<a id="__codelineno-38-38" name="__codelineno-38-38" href="#__codelineno-38-38"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-39" name="__codelineno-38-39" href="#__codelineno-38-39"></a>
<a id="__codelineno-38-40" name="__codelineno-38-40" href="#__codelineno-38-40"></a><span class="c1"># Set zpodfactory_ssh_key</span>
<a id="__codelineno-38-41" name="__codelineno-38-41" href="#__codelineno-38-41"></a>curl<span class="w"> </span>-X<span class="w"> </span>PATCH<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/settings/name<span class="o">=</span>zpodfactory_ssh_key<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-42" name="__codelineno-38-42" href="#__codelineno-38-42"></a><span class="s1">  &quot;value&quot;: &quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC/i56xhpfJKBC9TaL4BlPP3eDY03Csf4aLIM4OkSGDlTwNbadu5doGb8x/Z7650xsxXTuDq22UEVv0fuklc3DCl3NP9yv27LNj54g9WZPrC0wlDZOblvQo52atjkh4SIYZp5Rn9FFY+Vwc5/c3widbZ8OrNynS4QkKWrZHfmrjzWR0ZwGZPgTNxRiD0db6XVfxAxr3MuTKEd2yKlWenS8+ZEKnjR1nhEC6awmkt8p/uNZvyKHcVQ4Goyeo6EKaJf5JtdSV6mnN0lL3URuvDefrJygFzTNqhu1bwiXQl/zG969HaAkNRA4FhM2BIziIjCAzXrmQoaY8+5bWDXJg3kdp root@zPodMaster&quot;</span>
<a id="__codelineno-38-43" name="__codelineno-38-43" href="#__codelineno-38-43"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-44" name="__codelineno-38-44" href="#__codelineno-38-44"></a>
<a id="__codelineno-38-45" name="__codelineno-38-45" href="#__codelineno-38-45"></a><span class="c1"># Set zpodfactory_customerconnect_username</span>
<a id="__codelineno-38-46" name="__codelineno-38-46" href="#__codelineno-38-46"></a>curl<span class="w"> </span>-X<span class="w"> </span>PATCH<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/settings/name<span class="o">=</span>zpodfactory_customerconnect_username<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-47" name="__codelineno-38-47" href="#__codelineno-38-47"></a><span class="s1">  &quot;value&quot;: &quot;USERNAME@EMAIL.COM&quot;</span>
<a id="__codelineno-38-48" name="__codelineno-38-48" href="#__codelineno-38-48"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-49" name="__codelineno-38-49" href="#__codelineno-38-49"></a>
<a id="__codelineno-38-50" name="__codelineno-38-50" href="#__codelineno-38-50"></a><span class="c1"># Set zpodfactory_customerconnect_password</span>
<a id="__codelineno-38-51" name="__codelineno-38-51" href="#__codelineno-38-51"></a>curl<span class="w"> </span>-X<span class="w"> </span>PATCH<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/settings/name<span class="o">=</span>zpodfactory_customerconnect_password<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-52" name="__codelineno-38-52" href="#__codelineno-38-52"></a><span class="s1">  &quot;value&quot;: &quot;PASSWORD&quot;</span>
<a id="__codelineno-38-53" name="__codelineno-38-53" href="#__codelineno-38-53"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-54" name="__codelineno-38-54" href="#__codelineno-38-54"></a>
<a id="__codelineno-38-55" name="__codelineno-38-55" href="#__codelineno-38-55"></a><span class="c1"># Set some VMware licenses</span>
<a id="__codelineno-38-56" name="__codelineno-38-56" href="#__codelineno-38-56"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/settings<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-57" name="__codelineno-38-57" href="#__codelineno-38-57"></a><span class="s1">  &quot;name&quot;: &quot;license_vcsa-8_esxi&quot;,</span>
<a id="__codelineno-38-58" name="__codelineno-38-58" href="#__codelineno-38-58"></a><span class="s1">  &quot;description&quot;: &quot;vSphere 8 Enterprise Plus with Add-on for Kubernetes&quot;,</span>
<a id="__codelineno-38-59" name="__codelineno-38-59" href="#__codelineno-38-59"></a><span class="s1">  &quot;value&quot;: &quot;XXXXX-XXXXX-XXXXX-XXXXXX-XXXXX&quot;</span>
<a id="__codelineno-38-60" name="__codelineno-38-60" href="#__codelineno-38-60"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-61" name="__codelineno-38-61" href="#__codelineno-38-61"></a>
<a id="__codelineno-38-62" name="__codelineno-38-62" href="#__codelineno-38-62"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/settings<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-63" name="__codelineno-38-63" href="#__codelineno-38-63"></a><span class="s1">  &quot;name&quot;: &quot;license_vcsa-8_vcenter&quot;,</span>
<a id="__codelineno-38-64" name="__codelineno-38-64" href="#__codelineno-38-64"></a><span class="s1">  &quot;description&quot;: &quot;vCenter Server 8 Standard&quot;,</span>
<a id="__codelineno-38-65" name="__codelineno-38-65" href="#__codelineno-38-65"></a><span class="s1">  &quot;value&quot;: &quot;XXXXX-XXXXX-XXXXX-XXXXXX-XXXXX&quot;</span>
<a id="__codelineno-38-66" name="__codelineno-38-66" href="#__codelineno-38-66"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-67" name="__codelineno-38-67" href="#__codelineno-38-67"></a>
<a id="__codelineno-38-68" name="__codelineno-38-68" href="#__codelineno-38-68"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/settings<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-69" name="__codelineno-38-69" href="#__codelineno-38-69"></a><span class="s1">  &quot;name&quot;: &quot;license_vcsa-8_vsan&quot;,</span>
<a id="__codelineno-38-70" name="__codelineno-38-70" href="#__codelineno-38-70"></a><span class="s1">  &quot;description&quot;: &quot;vSAN Enterprise Plus&quot;,</span>
<a id="__codelineno-38-71" name="__codelineno-38-71" href="#__codelineno-38-71"></a><span class="s1">  &quot;value&quot;: &quot;XXXXX-XXXXX-XXXXX-XXXXXX-XXXXX&quot;</span>
<a id="__codelineno-38-72" name="__codelineno-38-72" href="#__codelineno-38-72"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-73" name="__codelineno-38-73" href="#__codelineno-38-73"></a>
<a id="__codelineno-38-74" name="__codelineno-38-74" href="#__codelineno-38-74"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/settings<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-75" name="__codelineno-38-75" href="#__codelineno-38-75"></a><span class="s1">  &quot;name&quot;: &quot;license_vcsa-8_tanzu&quot;,</span>
<a id="__codelineno-38-76" name="__codelineno-38-76" href="#__codelineno-38-76"></a><span class="s1">  &quot;description&quot;: &quot;Tanzu Standard (Subscription)&quot;,</span>
<a id="__codelineno-38-77" name="__codelineno-38-77" href="#__codelineno-38-77"></a><span class="s1">  &quot;value&quot;: &quot;XXXXX-XXXXX-XXXXX-XXXXXX-XXXXX&quot;</span>
<a id="__codelineno-38-78" name="__codelineno-38-78" href="#__codelineno-38-78"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-79" name="__codelineno-38-79" href="#__codelineno-38-79"></a>
<a id="__codelineno-38-80" name="__codelineno-38-80" href="#__codelineno-38-80"></a><span class="c1"># Set NSX license</span>
<a id="__codelineno-38-81" name="__codelineno-38-81" href="#__codelineno-38-81"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/settings<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-82" name="__codelineno-38-82" href="#__codelineno-38-82"></a><span class="s1">  &quot;name&quot;: &quot;license_nsx-4_enterprise&quot;,</span>
<a id="__codelineno-38-83" name="__codelineno-38-83" href="#__codelineno-38-83"></a><span class="s1">  &quot;description&quot;: &quot;NSX Data Center Enterprise Plus&quot;,</span>
<a id="__codelineno-38-84" name="__codelineno-38-84" href="#__codelineno-38-84"></a><span class="s1">  &quot;value&quot;: &quot;XXXXX-XXXXX-XXXXX-XXXXXX-XXXXX&quot;</span>
<a id="__codelineno-38-85" name="__codelineno-38-85" href="#__codelineno-38-85"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-86" name="__codelineno-38-86" href="#__codelineno-38-86"></a><span class="c1"># Create vSphere/NSX target endpoint</span>
<a id="__codelineno-38-87" name="__codelineno-38-87" href="#__codelineno-38-87"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/endpoints<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-88" name="__codelineno-38-88" href="#__codelineno-38-88"></a><span class="s1">  &quot;name&quot;: &quot;vSphere-SDDC&quot;,</span>
<a id="__codelineno-38-89" name="__codelineno-38-89" href="#__codelineno-38-89"></a><span class="s1">  &quot;description&quot;: &quot;vSphere SDDC with vCenter/NSX&quot;,</span>
<a id="__codelineno-38-90" name="__codelineno-38-90" href="#__codelineno-38-90"></a><span class="s1">  &quot;endpoints&quot;: {</span>
<a id="__codelineno-38-91" name="__codelineno-38-91" href="#__codelineno-38-91"></a><span class="s1">    &quot;compute&quot;: {</span>
<a id="__codelineno-38-92" name="__codelineno-38-92" href="#__codelineno-38-92"></a><span class="s1">      &quot;name&quot;: &quot;vcenter.fqdn.com&quot;,</span>
<a id="__codelineno-38-93" name="__codelineno-38-93" href="#__codelineno-38-93"></a><span class="s1">      &quot;driver&quot;: &quot;vsphere&quot;,</span>
<a id="__codelineno-38-94" name="__codelineno-38-94" href="#__codelineno-38-94"></a><span class="s1">      &quot;hostname&quot;: &quot;vcenter.fqdn.com&quot;,</span>
<a id="__codelineno-38-95" name="__codelineno-38-95" href="#__codelineno-38-95"></a><span class="s1">      &quot;username&quot;: &quot;myserviceusername&quot;,</span>
<a id="__codelineno-38-96" name="__codelineno-38-96" href="#__codelineno-38-96"></a><span class="s1">      &quot;password&quot;: &quot;myservicepassword&quot;,</span>
<a id="__codelineno-38-97" name="__codelineno-38-97" href="#__codelineno-38-97"></a><span class="s1">      &quot;datacenter&quot;: &quot;Datacenter-Paris&quot;,</span>
<a id="__codelineno-38-98" name="__codelineno-38-98" href="#__codelineno-38-98"></a><span class="s1">      &quot;resource_pool&quot;: &quot;ClusterName&quot;,</span>
<a id="__codelineno-38-99" name="__codelineno-38-99" href="#__codelineno-38-99"></a><span class="s1">      &quot;storage_policy&quot;: &quot;zPods&quot;,</span>
<a id="__codelineno-38-100" name="__codelineno-38-100" href="#__codelineno-38-100"></a><span class="s1">      &quot;storage_datastore&quot;: &quot;vsanDatastore&quot;,</span>
<a id="__codelineno-38-101" name="__codelineno-38-101" href="#__codelineno-38-101"></a><span class="s1">      &quot;contentlibrary&quot;: &quot;zPodFactory&quot;,</span>
<a id="__codelineno-38-102" name="__codelineno-38-102" href="#__codelineno-38-102"></a><span class="s1">      &quot;vmfolder&quot;: &quot;zPods-Paris&quot;</span>
<a id="__codelineno-38-103" name="__codelineno-38-103" href="#__codelineno-38-103"></a><span class="s1">    },</span>
<a id="__codelineno-38-104" name="__codelineno-38-104" href="#__codelineno-38-104"></a><span class="s1">    &quot;network&quot;: {</span>
<a id="__codelineno-38-105" name="__codelineno-38-105" href="#__codelineno-38-105"></a><span class="s1">      &quot;name&quot;: &quot;nsxmanager.fqdn.com&quot;,</span>
<a id="__codelineno-38-106" name="__codelineno-38-106" href="#__codelineno-38-106"></a><span class="s1">      &quot;driver&quot;: &quot;nsxt&quot;,</span>
<a id="__codelineno-38-107" name="__codelineno-38-107" href="#__codelineno-38-107"></a><span class="s1">      &quot;hostname&quot;: &quot;nsxmanager.fqdn.com&quot;,</span>
<a id="__codelineno-38-108" name="__codelineno-38-108" href="#__codelineno-38-108"></a><span class="s1">      &quot;username&quot;: &quot;myserviceusername&quot;,</span>
<a id="__codelineno-38-109" name="__codelineno-38-109" href="#__codelineno-38-109"></a><span class="s1">      &quot;password&quot;: &quot;myservicepassword&quot;,</span>
<a id="__codelineno-38-110" name="__codelineno-38-110" href="#__codelineno-38-110"></a><span class="s1">      &quot;networks&quot;: &quot;10.96.0.0/16&quot;,</span>
<a id="__codelineno-38-111" name="__codelineno-38-111" href="#__codelineno-38-111"></a><span class="s1">      &quot;transportzone&quot;: &quot;overlay-tz&quot;,</span>
<a id="__codelineno-38-112" name="__codelineno-38-112" href="#__codelineno-38-112"></a><span class="s1">      &quot;edgecluster&quot;: &quot;edgecluster-prod&quot;,</span>
<a id="__codelineno-38-113" name="__codelineno-38-113" href="#__codelineno-38-113"></a><span class="s1">      &quot;t0&quot;: &quot;T0-Paris-Prod&quot;,</span>
<a id="__codelineno-38-114" name="__codelineno-38-114" href="#__codelineno-38-114"></a><span class="s1">      &quot;macdiscoveryprofile&quot;: &quot;Nested-Mac-Discovery-Profile&quot;</span>
<a id="__codelineno-38-115" name="__codelineno-38-115" href="#__codelineno-38-115"></a><span class="s1">    }</span>
<a id="__codelineno-38-116" name="__codelineno-38-116" href="#__codelineno-38-116"></a><span class="s1">  },</span>
<a id="__codelineno-38-117" name="__codelineno-38-117" href="#__codelineno-38-117"></a><span class="s1">  &quot;enabled&quot;: true</span>
<a id="__codelineno-38-118" name="__codelineno-38-118" href="#__codelineno-38-118"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-119" name="__codelineno-38-119" href="#__codelineno-38-119"></a>
<a id="__codelineno-38-120" name="__codelineno-38-120" href="#__codelineno-38-120"></a>
<a id="__codelineno-38-121" name="__codelineno-38-121" href="#__codelineno-38-121"></a><span class="c1"># Add libraries</span>
<a id="__codelineno-38-122" name="__codelineno-38-122" href="#__codelineno-38-122"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/libraries<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-123" name="__codelineno-38-123" href="#__codelineno-38-123"></a><span class="s1">  &quot;name&quot;: &quot;default&quot;,</span>
<a id="__codelineno-38-124" name="__codelineno-38-124" href="#__codelineno-38-124"></a><span class="s1">  &quot;description&quot;: &quot;Default zPodFactory library&quot;,</span>
<a id="__codelineno-38-125" name="__codelineno-38-125" href="#__codelineno-38-125"></a><span class="s1">  &quot;git_url&quot;: &quot;https://github.com/zpodfactory/zpodlibrary&quot;</span>
<a id="__codelineno-38-126" name="__codelineno-38-126" href="#__codelineno-38-126"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-127" name="__codelineno-38-127" href="#__codelineno-38-127"></a>
<a id="__codelineno-38-128" name="__codelineno-38-128" href="#__codelineno-38-128"></a><span class="c1"># Enable component zbox</span>
<a id="__codelineno-38-129" name="__codelineno-38-129" href="#__codelineno-38-129"></a>curl<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/components/uid<span class="o">=</span>zbox-12.4/enable
<a id="__codelineno-38-130" name="__codelineno-38-130" href="#__codelineno-38-130"></a>
<a id="__codelineno-38-131" name="__codelineno-38-131" href="#__codelineno-38-131"></a><span class="c1"># Enable component esxi</span>
<a id="__codelineno-38-132" name="__codelineno-38-132" href="#__codelineno-38-132"></a>curl<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/components/uid<span class="o">=</span>esxi-8.0u2b/enable
<a id="__codelineno-38-133" name="__codelineno-38-133" href="#__codelineno-38-133"></a>
<a id="__codelineno-38-134" name="__codelineno-38-134" href="#__codelineno-38-134"></a><span class="c1"># Enable component vcsa</span>
<a id="__codelineno-38-135" name="__codelineno-38-135" href="#__codelineno-38-135"></a>curl<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/components/uid<span class="o">=</span>vcsa-8.0u2b/enable
<a id="__codelineno-38-136" name="__codelineno-38-136" href="#__codelineno-38-136"></a>
<a id="__codelineno-38-137" name="__codelineno-38-137" href="#__codelineno-38-137"></a><span class="c1"># Enable component nsx</span>
<a id="__codelineno-38-138" name="__codelineno-38-138" href="#__codelineno-38-138"></a>curl<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/components/uid<span class="o">=</span>nsx-4.1.2.3/enable
<a id="__codelineno-38-139" name="__codelineno-38-139" href="#__codelineno-38-139"></a>
<a id="__codelineno-38-140" name="__codelineno-38-140" href="#__codelineno-38-140"></a><span class="c1"># Add zbox profile</span>
<a id="__codelineno-38-141" name="__codelineno-38-141" href="#__codelineno-38-141"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/profiles?force<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-142" name="__codelineno-38-142" href="#__codelineno-38-142"></a><span class="s1">  &quot;name&quot;: &quot;zbox&quot;,</span>
<a id="__codelineno-38-143" name="__codelineno-38-143" href="#__codelineno-38-143"></a><span class="s1">  &quot;profile&quot;: [</span>
<a id="__codelineno-38-144" name="__codelineno-38-144" href="#__codelineno-38-144"></a><span class="s1">    {</span>
<a id="__codelineno-38-145" name="__codelineno-38-145" href="#__codelineno-38-145"></a><span class="s1">      &quot;component_uid&quot;: &quot;zbox-12.4&quot;</span>
<a id="__codelineno-38-146" name="__codelineno-38-146" href="#__codelineno-38-146"></a><span class="s1">    }</span>
<a id="__codelineno-38-147" name="__codelineno-38-147" href="#__codelineno-38-147"></a><span class="s1">  ]</span>
<a id="__codelineno-38-148" name="__codelineno-38-148" href="#__codelineno-38-148"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-149" name="__codelineno-38-149" href="#__codelineno-38-149"></a>
<a id="__codelineno-38-150" name="__codelineno-38-150" href="#__codelineno-38-150"></a><span class="c1"># Add hosts profile</span>
<a id="__codelineno-38-151" name="__codelineno-38-151" href="#__codelineno-38-151"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/profiles?force<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-152" name="__codelineno-38-152" href="#__codelineno-38-152"></a><span class="s1">  &quot;name&quot;: &quot;hosts&quot;,</span>
<a id="__codelineno-38-153" name="__codelineno-38-153" href="#__codelineno-38-153"></a><span class="s1">  &quot;profile&quot;: [</span>
<a id="__codelineno-38-154" name="__codelineno-38-154" href="#__codelineno-38-154"></a><span class="s1">    {</span>
<a id="__codelineno-38-155" name="__codelineno-38-155" href="#__codelineno-38-155"></a><span class="s1">      &quot;component_uid&quot;: &quot;zbox-12.4&quot;</span>
<a id="__codelineno-38-156" name="__codelineno-38-156" href="#__codelineno-38-156"></a><span class="s1">    },</span>
<a id="__codelineno-38-157" name="__codelineno-38-157" href="#__codelineno-38-157"></a><span class="s1">    [</span>
<a id="__codelineno-38-158" name="__codelineno-38-158" href="#__codelineno-38-158"></a><span class="s1">      {</span>
<a id="__codelineno-38-159" name="__codelineno-38-159" href="#__codelineno-38-159"></a><span class="s1">        &quot;component_uid&quot;: &quot;esxi-8.0u2b&quot;,</span>
<a id="__codelineno-38-160" name="__codelineno-38-160" href="#__codelineno-38-160"></a><span class="s1">        &quot;host_id&quot;: 11,</span>
<a id="__codelineno-38-161" name="__codelineno-38-161" href="#__codelineno-38-161"></a><span class="s1">        &quot;hostname&quot;: &quot;esxi11&quot;,</span>
<a id="__codelineno-38-162" name="__codelineno-38-162" href="#__codelineno-38-162"></a><span class="s1">        &quot;vcpu&quot;: 4,</span>
<a id="__codelineno-38-163" name="__codelineno-38-163" href="#__codelineno-38-163"></a><span class="s1">        &quot;vmem&quot;: 12</span>
<a id="__codelineno-38-164" name="__codelineno-38-164" href="#__codelineno-38-164"></a><span class="s1">      },</span>
<a id="__codelineno-38-165" name="__codelineno-38-165" href="#__codelineno-38-165"></a><span class="s1">      {</span>
<a id="__codelineno-38-166" name="__codelineno-38-166" href="#__codelineno-38-166"></a><span class="s1">        &quot;component_uid&quot;: &quot;esxi-8.0u2b&quot;,</span>
<a id="__codelineno-38-167" name="__codelineno-38-167" href="#__codelineno-38-167"></a><span class="s1">        &quot;host_id&quot;: 12,</span>
<a id="__codelineno-38-168" name="__codelineno-38-168" href="#__codelineno-38-168"></a><span class="s1">        &quot;hostname&quot;: &quot;esxi12&quot;,</span>
<a id="__codelineno-38-169" name="__codelineno-38-169" href="#__codelineno-38-169"></a><span class="s1">        &quot;vcpu&quot;: 4,</span>
<a id="__codelineno-38-170" name="__codelineno-38-170" href="#__codelineno-38-170"></a><span class="s1">        &quot;vmem&quot;: 12</span>
<a id="__codelineno-38-171" name="__codelineno-38-171" href="#__codelineno-38-171"></a><span class="s1">      }</span>
<a id="__codelineno-38-172" name="__codelineno-38-172" href="#__codelineno-38-172"></a><span class="s1">    ]</span>
<a id="__codelineno-38-173" name="__codelineno-38-173" href="#__codelineno-38-173"></a><span class="s1">  ]</span>
<a id="__codelineno-38-174" name="__codelineno-38-174" href="#__codelineno-38-174"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-175" name="__codelineno-38-175" href="#__codelineno-38-175"></a>
<a id="__codelineno-38-176" name="__codelineno-38-176" href="#__codelineno-38-176"></a><span class="c1"># Add &#39;base&#39; profile</span>
<a id="__codelineno-38-177" name="__codelineno-38-177" href="#__codelineno-38-177"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/profiles?force<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-178" name="__codelineno-38-178" href="#__codelineno-38-178"></a><span class="s1">  &quot;name&quot;: &quot;base&quot;,</span>
<a id="__codelineno-38-179" name="__codelineno-38-179" href="#__codelineno-38-179"></a><span class="s1">  &quot;profile&quot;: [</span>
<a id="__codelineno-38-180" name="__codelineno-38-180" href="#__codelineno-38-180"></a><span class="s1">    {</span>
<a id="__codelineno-38-181" name="__codelineno-38-181" href="#__codelineno-38-181"></a><span class="s1">      &quot;component_uid&quot;: &quot;zbox-12.4&quot;</span>
<a id="__codelineno-38-182" name="__codelineno-38-182" href="#__codelineno-38-182"></a><span class="s1">    },</span>
<a id="__codelineno-38-183" name="__codelineno-38-183" href="#__codelineno-38-183"></a><span class="s1">    [</span>
<a id="__codelineno-38-184" name="__codelineno-38-184" href="#__codelineno-38-184"></a><span class="s1">      {</span>
<a id="__codelineno-38-185" name="__codelineno-38-185" href="#__codelineno-38-185"></a><span class="s1">        &quot;component_uid&quot;: &quot;esxi-8.0u2b&quot;,</span>
<a id="__codelineno-38-186" name="__codelineno-38-186" href="#__codelineno-38-186"></a><span class="s1">        &quot;host_id&quot;: 11,</span>
<a id="__codelineno-38-187" name="__codelineno-38-187" href="#__codelineno-38-187"></a><span class="s1">        &quot;hostname&quot;: &quot;esxi11&quot;,</span>
<a id="__codelineno-38-188" name="__codelineno-38-188" href="#__codelineno-38-188"></a><span class="s1">        &quot;vcpu&quot;: 6,</span>
<a id="__codelineno-38-189" name="__codelineno-38-189" href="#__codelineno-38-189"></a><span class="s1">        &quot;vmem&quot;: 48</span>
<a id="__codelineno-38-190" name="__codelineno-38-190" href="#__codelineno-38-190"></a><span class="s1">      },</span>
<a id="__codelineno-38-191" name="__codelineno-38-191" href="#__codelineno-38-191"></a><span class="s1">      {</span>
<a id="__codelineno-38-192" name="__codelineno-38-192" href="#__codelineno-38-192"></a><span class="s1">        &quot;component_uid&quot;: &quot;esxi-8.0u2b&quot;,</span>
<a id="__codelineno-38-193" name="__codelineno-38-193" href="#__codelineno-38-193"></a><span class="s1">        &quot;host_id&quot;: 12,</span>
<a id="__codelineno-38-194" name="__codelineno-38-194" href="#__codelineno-38-194"></a><span class="s1">        &quot;hostname&quot;: &quot;esxi12&quot;,</span>
<a id="__codelineno-38-195" name="__codelineno-38-195" href="#__codelineno-38-195"></a><span class="s1">        &quot;vcpu&quot;: 6,</span>
<a id="__codelineno-38-196" name="__codelineno-38-196" href="#__codelineno-38-196"></a><span class="s1">        &quot;vmem&quot;: 48</span>
<a id="__codelineno-38-197" name="__codelineno-38-197" href="#__codelineno-38-197"></a><span class="s1">      }</span>
<a id="__codelineno-38-198" name="__codelineno-38-198" href="#__codelineno-38-198"></a><span class="s1">    ],</span>
<a id="__codelineno-38-199" name="__codelineno-38-199" href="#__codelineno-38-199"></a><span class="s1">    {</span>
<a id="__codelineno-38-200" name="__codelineno-38-200" href="#__codelineno-38-200"></a><span class="s1">        &quot;component_uid&quot;: &quot;vcsa-8.0u2b&quot;</span>
<a id="__codelineno-38-201" name="__codelineno-38-201" href="#__codelineno-38-201"></a><span class="s1">    }</span>
<a id="__codelineno-38-202" name="__codelineno-38-202" href="#__codelineno-38-202"></a><span class="s1">  ]</span>
<a id="__codelineno-38-203" name="__codelineno-38-203" href="#__codelineno-38-203"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-204" name="__codelineno-38-204" href="#__codelineno-38-204"></a>
<a id="__codelineno-38-205" name="__codelineno-38-205" href="#__codelineno-38-205"></a><span class="c1"># Add &#39;sddc&#39; profile</span>
<a id="__codelineno-38-206" name="__codelineno-38-206" href="#__codelineno-38-206"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span>/profiles?force<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-38-207" name="__codelineno-38-207" href="#__codelineno-38-207"></a><span class="s1">  &quot;name&quot;: &quot;sddc&quot;,</span>
<a id="__codelineno-38-208" name="__codelineno-38-208" href="#__codelineno-38-208"></a><span class="s1">  &quot;profile&quot;: [</span>
<a id="__codelineno-38-209" name="__codelineno-38-209" href="#__codelineno-38-209"></a><span class="s1">    {</span>
<a id="__codelineno-38-210" name="__codelineno-38-210" href="#__codelineno-38-210"></a><span class="s1">      &quot;component_uid&quot;: &quot;zbox-12.4&quot;</span>
<a id="__codelineno-38-211" name="__codelineno-38-211" href="#__codelineno-38-211"></a><span class="s1">    },</span>
<a id="__codelineno-38-212" name="__codelineno-38-212" href="#__codelineno-38-212"></a><span class="s1">    [</span>
<a id="__codelineno-38-213" name="__codelineno-38-213" href="#__codelineno-38-213"></a><span class="s1">      {</span>
<a id="__codelineno-38-214" name="__codelineno-38-214" href="#__codelineno-38-214"></a><span class="s1">        &quot;component_uid&quot;: &quot;esxi-8.0u2b&quot;,</span>
<a id="__codelineno-38-215" name="__codelineno-38-215" href="#__codelineno-38-215"></a><span class="s1">        &quot;host_id&quot;: 11,</span>
<a id="__codelineno-38-216" name="__codelineno-38-216" href="#__codelineno-38-216"></a><span class="s1">        &quot;hostname&quot;: &quot;esxi11&quot;,</span>
<a id="__codelineno-38-217" name="__codelineno-38-217" href="#__codelineno-38-217"></a><span class="s1">        &quot;vcpu&quot;: 6,</span>
<a id="__codelineno-38-218" name="__codelineno-38-218" href="#__codelineno-38-218"></a><span class="s1">        &quot;vmem&quot;: 48</span>
<a id="__codelineno-38-219" name="__codelineno-38-219" href="#__codelineno-38-219"></a><span class="s1">      },</span>
<a id="__codelineno-38-220" name="__codelineno-38-220" href="#__codelineno-38-220"></a><span class="s1">      {</span>
<a id="__codelineno-38-221" name="__codelineno-38-221" href="#__codelineno-38-221"></a><span class="s1">        &quot;component_uid&quot;: &quot;esxi-8.0u2b&quot;,</span>
<a id="__codelineno-38-222" name="__codelineno-38-222" href="#__codelineno-38-222"></a><span class="s1">        &quot;host_id&quot;: 12,</span>
<a id="__codelineno-38-223" name="__codelineno-38-223" href="#__codelineno-38-223"></a><span class="s1">        &quot;hostname&quot;: &quot;esxi12&quot;,</span>
<a id="__codelineno-38-224" name="__codelineno-38-224" href="#__codelineno-38-224"></a><span class="s1">        &quot;vcpu&quot;: 6,</span>
<a id="__codelineno-38-225" name="__codelineno-38-225" href="#__codelineno-38-225"></a><span class="s1">        &quot;vmem&quot;: 48</span>
<a id="__codelineno-38-226" name="__codelineno-38-226" href="#__codelineno-38-226"></a><span class="s1">      },</span>
<a id="__codelineno-38-227" name="__codelineno-38-227" href="#__codelineno-38-227"></a><span class="s1">      {</span>
<a id="__codelineno-38-228" name="__codelineno-38-228" href="#__codelineno-38-228"></a><span class="s1">        &quot;component_uid&quot;: &quot;esxi-8.0u2b&quot;,</span>
<a id="__codelineno-38-229" name="__codelineno-38-229" href="#__codelineno-38-229"></a><span class="s1">        &quot;host_id&quot;: 13,</span>
<a id="__codelineno-38-230" name="__codelineno-38-230" href="#__codelineno-38-230"></a><span class="s1">        &quot;hostname&quot;: &quot;esxi13&quot;,</span>
<a id="__codelineno-38-231" name="__codelineno-38-231" href="#__codelineno-38-231"></a><span class="s1">        &quot;vcpu&quot;: 6,</span>
<a id="__codelineno-38-232" name="__codelineno-38-232" href="#__codelineno-38-232"></a><span class="s1">        &quot;vmem&quot;: 48</span>
<a id="__codelineno-38-233" name="__codelineno-38-233" href="#__codelineno-38-233"></a><span class="s1">      }</span>
<a id="__codelineno-38-234" name="__codelineno-38-234" href="#__codelineno-38-234"></a><span class="s1">    ],</span>
<a id="__codelineno-38-235" name="__codelineno-38-235" href="#__codelineno-38-235"></a><span class="s1">    {</span>
<a id="__codelineno-38-236" name="__codelineno-38-236" href="#__codelineno-38-236"></a><span class="s1">        &quot;component_uid&quot;: &quot;vcsa-8.0u2b&quot;</span>
<a id="__codelineno-38-237" name="__codelineno-38-237" href="#__codelineno-38-237"></a><span class="s1">    },</span>
<a id="__codelineno-38-238" name="__codelineno-38-238" href="#__codelineno-38-238"></a><span class="s1">    {</span>
<a id="__codelineno-38-239" name="__codelineno-38-239" href="#__codelineno-38-239"></a><span class="s1">        &quot;component_uid&quot;: &quot;nsx-4.1.2.3&quot;</span>
<a id="__codelineno-38-240" name="__codelineno-38-240" href="#__codelineno-38-240"></a><span class="s1">    }</span>
<a id="__codelineno-38-241" name="__codelineno-38-241" href="#__codelineno-38-241"></a><span class="s1">  ]</span>
<a id="__codelineno-38-242" name="__codelineno-38-242" href="#__codelineno-38-242"></a><span class="s1">}&#39;</span>
<a id="__codelineno-38-243" name="__codelineno-38-243" href="#__codelineno-38-243"></a><span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>zpodapi<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;API Token:&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{ print $5 }&#39;</span><span class="k">)</span>
<a id="__codelineno-38-244" name="__codelineno-38-244" href="#__codelineno-38-244"></a>
<a id="__codelineno-38-245" name="__codelineno-38-245" href="#__codelineno-38-245"></a>just<span class="w"> </span>zcli<span class="w"> </span>factory<span class="w"> </span>add<span class="w"> </span>zpodfactory<span class="w"> </span>-s<span class="w"> </span>http://<span class="nv">$ZPODAPI_URL</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$TOKEN</span><span class="w"> </span>-a
<a id="__codelineno-38-246" name="__codelineno-38-246" href="#__codelineno-38-246"></a>
<a id="__codelineno-38-247" name="__codelineno-38-247" href="#__codelineno-38-247"></a>docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span>-f
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Add <code>ZPODAPI_DEV_AUTOAUTH_USER=1</code> in your .env file if you want to work easily without setting up an authentication token.</p>
<p>Change <code>X.X.X.X</code> by the IP of this zPodFactory VM</p>
<p>Change customer connect username and password credentials</p>
<p>Change the public SSH Key to the one you want to use to login to the nested environments components. (zbox, esxi mainly)</p>
<p>Change the vSphere/NSX target endpoint configuration to match your physical environment.
Make sure the values you specify for your environment do exist in vSphere and NSX.</p>
<p>Change the licenses keys</p>
<p>Adapt whatever you want for the profiles, those are provided examples.</p>
</div>
<p>Make the script executable</p>
<div class="highlight" data-copy="chmod +x $HOME/git/zpodcore/deploy.sh"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>❯ chmod +x $HOME/git/zpodcore/deploy.sh
</code></pre></div>
<p>Set python version in <code>$HOME/git/zpodcore</code> for <code>just zcli</code> to work properly</p>
<div class="highlight" data-copy="pyenv local 3.12.1 && pyenv exec pip install poetry"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>❯ pyenv local 3.12.1 &amp;&amp; pyenv exec pip install poetry
</code></pre></div>
<p>Finally launch the docker compose application stack with our script:</p>
<div class="highlight" data-copy="./deploy.sh"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>❯ ./deploy.sh
</code></pre></div>
<p>This should take a while at first launch, and display everything happening in the background as we are automatically following the docker compose logs.</p>
<p>You can now head to the <a href="../admin/">Administration Guide</a> to learn how to setup/manage zPodFactory.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../blog/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Blog">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Blog
              </div>
            </div>
          </a>
        
        
          
          <a href="../admin/" class="md-footer__link md-footer__link--next" aria-label="Next: Admin Guide">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Admin Guide
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.tabs.sticky", "navigation.footer", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>